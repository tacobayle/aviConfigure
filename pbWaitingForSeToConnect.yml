---
- name: Wait for SE to connect to Controller
  avi_api_session:
    avi_credentials: "{{ avi_credentials | default(omit) }}"
    api_context: "{{ avi_api_context | default(omit) }}"
    http_method: get
    path: serviceengine
    params:
      name: "{{ item }}"
  register: api_results
  until: api_results.obj.results[0].se_connected == true
  retries: 50
  delay: 60
  delegate_to: "localhost"
